(this["webpackJsonprevolute-test-app"]=this["webpackJsonprevolute-test-app"]||[]).push([[0],{35:function(t,n,e){},40:function(t,n,e){"use strict";e.r(n);var c,a,o=e(0),r=e.n(o),i=e(24),u=e.n(i),s=(e(35),e(9)),l={},b=Object(o.createContext)(l),d={USD:{code:"USD",balance:800.77},EUR:{code:"EUR",balance:150.44},GBP:{code:"GBP",balance:200.05},MXN:{code:"MXN",balance:300}},j=e(8),p=e(4);!function(t){t.Sell="sell",t.Buy="buy"}(c||(c={}));var f,h=(a={},Object(j.a)(a,c.Sell,c.Buy),Object(j.a)(a,c.Buy,c.Sell),a),O=Math.pow(10,2),x=function(t){return Math.round(t*O)},g=function(t,n,e,c,a){var o=function(t,n,e,c){if(n===e)return t[c];if(n===c)return parseFloat((1/t[e]).toFixed(8));var a=t[e],o=t[c];if(!a)throw new Error("rate ".concat(n,"/").concat(e," not found"));if(!o)throw new Error("rate ".concat(n,"/").concat(c," not found"));return parseFloat((o/a).toFixed(8))}(t,n,e,c);if(!o)throw new Error("rate ".concat(e,"/").concat(c," not found"));if(!a)return"";var r=parseFloat(a),i=x(r),u=x(o),s=Math.round(i*u);return(Math.round(s/O)/O).toFixed(2)},v=function(t,n){var e=n.account,a=n.amount,o=e.balance,r=x(o),i=parseFloat(a),u=x(i),s=Math.round(t===c.Sell?r-u:r+u);return Object(p.a)(Object(p.a)({},e),{},{balance:Number((s/O).toFixed(2))})},m=function(t,n,e,a){return t?n===c.Sell&&e<parseFloat(a):n===c.Buy&&e<parseFloat(a)};!function(t){t.top="bottom",t.bottom="top"}(f||(f={}));var w=function(t,n){var e,c,a=t.active,o=t.top,r=t.operation,i=o.account.code===a.code?"top":"bottom",u=f[i],s=t[i].account,l=t[u].account;switch(n.type){case R.ChangeActiveAccount:return Object(p.a)(Object(p.a)({},t),{},{active:n.account});case R.ChangeActiveAmount:return Object(p.a)(Object(p.a)({},t),{},(e={},Object(j.a)(e,i,Object(p.a)(Object(p.a)({},t[i]),{},{amount:n.amount})),Object(j.a)(e,u,Object(p.a)(Object(p.a)({},t[u]),{},{amount:g(t.rates,t.base,s.code,l.code,n.amount)})),e));case R.ChangeAccount:if(n.account.code===s.code)throw new Error("goddamn: ".concat(n.account.code,", ").concat(s.code));var b;return n.account.code===l.code?Object(p.a)(Object(p.a)({},t),{},(b={active:Object(p.a)(Object(p.a)({},l),{},{amount:""})},Object(j.a)(b,i,{account:l,amount:""}),Object(j.a)(b,u,{account:s,amount:""}),b)):Object(p.a)(Object(p.a)({},t),{},(c={active:n.account},Object(j.a)(c,i,{account:n.account,amount:""}),Object(j.a)(c,u,Object(p.a)(Object(p.a)({},t[u]),{},{amount:""})),c));case R.Exchange:return function(t){var n,e=t.accounts,c=t.top,a=t.bottom,o=t.operation,r=v(o,c),i=v(h[o],a);return Object(p.a)(Object(p.a)({},t),{},{active:r,top:Object(p.a)(Object(p.a)({},c),{},{account:r}),bottom:Object(p.a)(Object(p.a)({},a),{},{account:i}),accounts:Object(p.a)(Object(p.a)({},e),{},(n={},Object(j.a)(n,c.account.code,r),Object(j.a)(n,a.account.code,i),n))})}(t);case R.ToggleOperation:return Object(p.a)(Object(p.a)({},t),{},{operation:h[r]});case R.UpdateNames:return Object(p.a)(Object(p.a)({},t),{},{names:n.names});case R.UpdateRates:return Object(p.a)(Object(p.a)({},t),{},{rates:n.rates,base:n.base});default:return t}},y=e(29),C={EUR:.85,GBP:.73,MXN:20},L=function(t){var n=Object.entries(t).reduce((function(t,n){var e=Object(s.a)(n,2)[1];return[].concat(Object(y.a)(t),[e])}),[]),e=Object(s.a)(n,2),a=e[0];return{accounts:t,active:a,top:{account:a,amount:""},bottom:{account:e[1],amount:""},operation:c.Buy,rates:C,base:"USD"}},k=function(){return Object(o.useContext)(b)},A=e(17),B=e.n(A),S=e(21),E=e(43),M="3a6f503e28aa47ddb6682031bd78a828",U=new URL("https://openexchangerates.org/api/currencies.json");U.searchParams.append("app_id",M);var F=function(){var t=Object(S.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(U));case 2:return t.next=4,t.sent.json();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=new URL("https://openexchangerates.org/api/latest.json");z.searchParams.append("app_id",M);var R,N=function(){var t=Object(S.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(z));case 2:return t.next=4,t.sent.json();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=e(2);!function(t){t.Active="active",t.ChangeActiveAccount="changeActiveAccount",t.ChangeActiveAmount="changeActiveAmount",t.ChangeAccount="changeAccount",t.Exchange="exchange",t.ToggleOperation="toggleOperation",t.UpdateNames="updateNames",t.UpdateRates="updateRates"}(R||(R={}));var P,Z,V,H,D,G,X,I,J,_,W,$,q,K,Q,Y,tt,nt,et,ct,at,ot,rt,it,ut,st=function(t){var n=t.children,e=Object(o.useReducer)(w,d,L),c=Object(s.a)(e,2),a=c[0],r=c[1],i=Object(o.useCallback)((function(t){return r({type:R.ChangeActiveAccount,account:t})}),[]),u=Object(o.useCallback)((function(t){return r({type:R.ChangeActiveAmount,amount:t})}),[]),l=Object(o.useCallback)((function(t){return r({type:R.ChangeAccount,account:t})}),[]),j=Object(o.useCallback)((function(){return r({type:R.ToggleOperation})}),[]),p=Object(o.useCallback)((function(){return r({type:R.Exchange})}),[]);!function(t,n){var e=Object(o.useState)(!0),c=Object(s.a)(e,2),a=c[0],r=c[1],i=Object(o.useCallback)((function(){return r(!1)}),[]),u=Object(E.a)("currencies",F,{enabled:a,onSuccess:i}),l=u.isLoading,b=u.data,d=Object(E.a)("latest",N,{refetchInterval:1e4}),j=d.isLoading,p=d.data;Object(o.useEffect)((function(){!l&&b&&t(b)}),[b,l,t]),Object(o.useEffect)((function(){!j&&p&&n(p.base,p.rates)}),[p,j,n])}(Object(o.useCallback)((function(t){return r({type:R.UpdateNames,names:t})}),[]),Object(o.useCallback)((function(t,n){return r({type:R.UpdateRates,base:t,rates:n})}),[]));var f={changeActiveAccount:i,changeActiveAmmount:u,changeAccount:l,toggleOperation:j,makeExchange:p,state:a};return Object(T.jsx)(b.Provider,{value:f,children:n})},lt=e(42),bt=e(25),dt=new lt.a,jt=function(t){var n=t.children;return Object(T.jsx)(bt.a,{client:dt,children:n})},pt=e(6),ft=e(7),ht=ft.a.div(P||(P=Object(pt.a)(["\n    display: flex;\n    width: 100%;\n    border-radius: 2px;\n    background-color: #fff;\n    position: relative;\n    padding: 5px 10px 5px 5px;\n"]))),Ot=ft.a.div(Z||(Z=Object(pt.a)(["\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    max-width: 100px;\n    height: calc(100% - 10px);\n    justify-content: space-between;\n"]))),xt=ft.a.button(V||(V=Object(pt.a)(["\n    border: none;\n    display: flex;\n    align-items: center;\n    width: fit-content;\n    border-radius: 5px;\n    background-color: transparent;\n    padding: 0 10px;\n    cursor: pointer;\n    font-size: 12px;\n    font-weight: 600;\n\n    :hover {\n        background-color: #f7f5f7;\n    }\n"]))),gt=ft.a.span(H||(H=Object(pt.a)(["\n    white-space: nowrap;\n    color: darkgrey;\n    font-size: 12px;\n    font-weight: 400;\n    margin-left: 5px;\n"]))),vt=ft.a.input(D||(D=Object(pt.a)(["\n    width: 100%;\n    height: 24px;\n    padding: 0 0 20px 100px;\n    outline: none;\n    text-align: end;\n    border: none;\n    font-weight: 800;\n    font-size: 14px;\n"]))),mt=ft.a.span(G||(G=Object(pt.a)(["\n    position: absolute;\n    right: 5px;\n    bottom: 5px;\n    color: #cc7e81;\n    font-size: 12px;\n    font-weight: 400;\n"]))),wt=function(){return Object(T.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:Object(T.jsx)("path",{fill:"currentColor",d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"})})},yt=(X={},Object(j.a)(X,c.Sell,"-"),Object(j.a)(X,c.Buy,"+"),X),Ct=(I={},Object(j.a)(I,c.Sell,"+"),Object(j.a)(I,c.Buy,"-"),I),Lt=function(t){var n=t.isTop,e=void 0!==n&&n,c=t.account,a=t.onAccountChange,r=k(),i=r.state,u=i.active.code,l=i.operation,b=i.top,d=i.bottom,j=r.changeActiveAccount,p=r.changeActiveAmmount,f=c.code,h=c.balance,O=f===u,x=(e?b:d).amount,g=parseFloat(x),v=Object(o.useState)(g>0?yt[l]:""),w=Object(s.a)(v,2),y=w[0],C=w[1],L=Object(o.useCallback)((function(){return a(c)}),[a,c]),A=Object(o.useCallback)((function(t){var n=t.target.value.replace(/[^0-9.]/g,"").replace(/^0+/,"");""!==n&&0!==parseFloat(n)?/^\d*[.]{0,1}\d{0,2}$/.test(n)&&p(n.startsWith(".")?"0".concat(n):n):p("")}),[p]),B=Object(o.useCallback)((function(){return j(c)}),[j,c]);return Object(o.useEffect)((function(){C(g>0?e?yt[l]:Ct[l]:"")}),[x,l]),Object(T.jsxs)(ht,{"data-testid":e?"top-container":"bottom-container",children:[Object(T.jsxs)(Ot,{children:[Object(T.jsxs)(xt,{"data-testid":"change-account-btn",onClick:L,children:[c.code,Object(T.jsx)(wt,{})]}),Object(T.jsx)(gt,{children:"Balance ".concat(h)})]}),Object(T.jsx)(vt,{"data-testid":e?"top-input":"bottom-input",value:O||x?"".concat(y).concat(x):"",onChange:A,placeholder:"0",type:"text",onFocus:B}),Object(T.jsx)(mt,{children:m(e,l,h,x)&&"exceeds balance"})]})},kt=ft.a.div(J||(J=Object(pt.a)(["\n    width: 100%;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    justify-contnent: center;\n    justify-content: center;\n    align-items: center;\n    background-color: #f7f5f7;\n"]))),At=ft.a.div(_||(_=Object(pt.a)(["\n    width: 100%;\n    height: 100%;\n    max-width: 320px;\n    display: flex;\n    flex-direction: column;\n    margin-top: 200px;\n    align-items: center;\n\n    > :not(:last-child) {\n        margin-bottom: 5px;\n    }\n"]))),Bt=ft.a.div(W||(W=Object(pt.a)(["\n    width: 100%;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    justify-contnent: center;\n    justify-content: center;\n    align-items: center;\n    background-color: #fff;\n"]))),St=ft.a.div($||($=Object(pt.a)(["\n    width: 100%;\n    display: flex;\n    align-items: center;\n    background-color: #fff;\n\n    button {\n        border: none;\n        cursor: pointer;\n        background-color: transparent;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        padding: 6px;\n\n        :hover {\n            background-color: #f7f5f7\n        }\n    }\n\n    input {\n        flex-grow: 1;\n        border: none;\n        outline: none;\n        padding: 0 20px;\n    }\n"]))),Et=ft.a.ul(q||(q=Object(pt.a)(["\n    width: 100%;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    background-color: #fff;\n"]))),Mt=ft.a.li(K||(K=Object(pt.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    padding: 0 10px;\n    cursor: pointer;\n\n    :hover {\n        background-color: #f7f5f7;\n    }\n"]))),Ut=ft.a.span(Q||(Q=Object(pt.a)(["\n    display: flex;\n    align-items: center;\n    font-size: 16px;\n    font-weight: 600;\n"]))),Ft=ft.a.div(Y||(Y=Object(pt.a)(["\n    width: 5px;\n    height: 5px;\n    margin: 0 10px;\n    border-radius: 50%;\n    background-color: #000;\n"]))),zt=ft.a.span(tt||(tt=Object(pt.a)(["\n    font-size: 10px;\n    font-weight: 500;\n    line-height: 16px;\n    color: darkgrey;\n"]))),Rt=function(){return Object(T.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:Object(T.jsx)("path",{fill:"currentColor",d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"})})},Nt=function(){return Object(T.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:Object(T.jsx)("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})},Tt=function(t){var n=t.onCurrencyChange,e=Object(o.useState)(""),c=Object(s.a)(e,2),a=c[0],r=c[1],i=k(),u=i.state,l=i.changeAccount,b=u.accounts,d=u.active,j=u.names,p=Object(o.useMemo)((function(){return Object.entries(b).map((function(t){return Object(s.a)(t,2)[1]})).filter((function(t){return t.code!==d.code}))}),[b,d]),f=Object(o.useCallback)((function(){return n()}),[n]),h=Object(o.useCallback)((function(t){return r(t.target.value)}),[]),O=Object(o.useCallback)((function(t){var n=t.currentTarget.getAttribute("data-currency");l(b[n]),f()}),[l,f,b]),x=Object(o.useCallback)((function(){return r("")}),[]),g=a?p.filter((function(t){return t.code.includes(a)})):p;return Object(T.jsx)(Bt,{children:Object(T.jsxs)(At,{children:[Object(T.jsxs)(St,{children:[Object(T.jsx)("button",{onClick:f,children:Object(T.jsx)(Rt,{})}),Object(T.jsx)("input",{"data-testid":"currency-input",onChange:h,value:a}),Object(T.jsx)("button",{disabled:!a,onClick:x,children:Object(T.jsx)(Nt,{})})]}),Object(T.jsx)(Et,{role:"listbox","data-testid":"currenct-list",children:g.map((function(t){var n=t.code,e=t.balance;return Object(T.jsxs)(Mt,{role:"option","data-testid":"".concat(n,"-item"),"data-currency":n,onClick:O,children:[Object(T.jsxs)(Ut,{children:[n,Object(T.jsx)(Ft,{}),e]}),(null===j||void 0===j?void 0:j[n])&&Object(T.jsx)(zt,{children:null===j||void 0===j?void 0:j[n]})]},n)}))})]})})},Pt=function(){return Object(T.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:Object(T.jsx)("path",{fill:"currentColor",d:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z"})})},Zt=function(){return Object(T.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:Object(T.jsx)("path",{fill:"currentColor",d:"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z"})})},Vt=ft.a.div(nt||(nt=Object(pt.a)(["\n    width: 100%;\n    height: 0;\n    display: flex;\n    position: relative;\n    z-index: 1;\n"]))),Ht=ft.a.button(et||(et=Object(pt.a)(["\n    width: 28px;\n    height: 28px;\n    padding: 0;\n    border-radius: 50%;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    border: 4px solid #f7f5f7;\n    background-color: #fff;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    > svg {\n        width: 12px;\n        height: 12px;\n        color: #0357ef;\n    }\n"]))),Dt=(ct={},Object(j.a)(ct,c.Sell,Object(T.jsx)(Zt,{})),Object(j.a)(ct,c.Buy,Object(T.jsx)(Pt,{})),ct),Gt=function(t){var n=t.operation,e=t.onToggleOperation;return Object(T.jsx)(Vt,{children:Object(T.jsx)(Ht,{"data-testid":"switch-btn",onClick:e,children:Dt[n]})})},Xt=(ft.a.div(at||(at=Object(pt.a)(["\n    width: 100%;\n    height: 100%;\n    max-width: 320px;\n    display: flex;\n    flex-direction: column;\n    justify-contnent: center;\n    justify-content: center;\n    align-items: center;\n"]))),ft.a.div(ot||(ot=Object(pt.a)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n"])))),It=ft.a.div(rt||(rt=Object(pt.a)(["\n    font-size: 24px;\n    font-weight: 600;\n    text-transform: capitalize;\n    margin-bottom: 5px;\n"]))),Jt=ft.a.div(it||(it=Object(pt.a)(["\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    color: #0357ef;\n\n    > svg {\n        width: 12px;\n        height: 12px;\n        margin-right: 5px;\n    }\n"]))),_t=ft.a.button(ut||(ut=Object(pt.a)(["\n    margin-top: 100px;\n    background-color: #0357ef;\n    color: #fff;\n    width: 100%;\n    cursor: pointer;\n    border-radius: 10px;\n    text-transform: capitalize;\n    height: 40px;\n    border: none;\n\n    :hover {\n        opacity: 0.9;\n    }\n\n    :disabled {\n        opacity: 0.5;\n        cursor: default;\n    }\n"]))),Wt=function(){return Object(T.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",children:Object(T.jsx)("path",{fill:"currentColor",d:"M3.5,18.5L9.5,12.5L13.5,16.5L22,6.92L20.59,5.5L13.5,13.5L9.5,9.5L2,17L3.5,18.5Z"})})},$t=function(){var t,n=Object(o.useState)(),e=Object(s.a)(n,2),c=e[0],a=e[1],r=k(),i=r.state,u=r.changeActiveAccount,l=r.toggleOperation,b=r.makeExchange,d=i.operation,j=i.top,p=i.bottom,f=i.active,h=Object(o.useCallback)((function(t){t&&u(t),a(t)}),[u,a]),O=Object(o.useCallback)((function(t){var n=t.rates,e=t.base,c=t.top,a=t.bottom;return g(n,e,c.account.code,a.account.code,"1")}),[]);if(c)return Object(T.jsx)(Tt,{onCurrencyChange:h});var x=m(!0,d,null===(t=j.account)||void 0===t?void 0:t.balance,j.amount)||m(!1,d,p.account.balance,p.amount);return Object(T.jsx)(kt,{children:Object(T.jsxs)(At,{children:[Object(T.jsxs)(Xt,{children:[Object(T.jsx)(It,{children:"".concat(d," ").concat(f.code)}),Object(T.jsxs)(Jt,{children:[Object(T.jsx)(Wt,{}),"1".concat(j.account.code," = ").concat(O(i)+p.account.code)]})]}),Object(T.jsx)(Lt,{isTop:!0,account:j.account,onAccountChange:h}),Object(T.jsx)(Gt,{operation:d,onToggleOperation:l}),Object(T.jsx)(Lt,{account:p.account,onAccountChange:h}),Object(T.jsxs)(_t,{"data-testid":"confirm-btn",onClick:b,disabled:x||!j.amount||!p.amount,children:[d," ",j.account.code," for ",p.account.code]})]})})},qt=function(){return Object(T.jsx)(jt,{children:Object(T.jsx)(st,{children:Object(T.jsx)($t,{})})})};u.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(qt,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.eb53a9aa.chunk.js.map